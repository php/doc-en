<?xml version="1.0" encoding="utf-8"?>
<sect1 xml:id="migration82.other-changes" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Other Changes</title>

 <sect2 xml:id="migration82.other-changes.core">
  <title>Core changes</title>

  <para>
   The <type>iterable</type> type is now a built-in compile time alias for
   <type class="union"><type>array</type><type>Traversable</type></type>.
   Error messages relating to <literal>iterable</literal> will therefore
   now use <literal>array|Traversable</literal>.
   Type Reflection is preserved for single <literal>iterable</literal>
   (and <literal>?iterable</literal>) to produce a
   <classname>ReflectionNamedType</classname> with name <literal>iterable</literal>,
   however usage of <literal>iterable</literal> in union types will be
   converted to <literal>array|Traversable</literal>.
  </para>
 </sect2>

 <sect2 xml:id="migration82.other-changes.sapi">
  <title>Changes in SAPI Modules</title>

  <sect3 xml:id="migration82.other-changes.sapi.cli">
   <title>CLI</title>

   <para>
    The STDOUT, STDERR and STDIN are no longer closed on resource destruction
    which is mostly when the CLI finishes. It is however still possible to
    explicitly close those streams using <function>fclose</function> and similar.
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="migration82.other-changes.functions">
  <title>Changed Functions</title>

  <sect3 xml:id="migration82.other-changes.functions.core">
   <title>Core</title>

   <para>
    The str*cmp, str*pos, <function>substr_compare</function> functions, using binary safe string
    comparison now return -1, 0 and 1.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.functions.dba">
   <title>DBA</title>

   <para>
    <function>dba_open</function> and <function>dba_popen</function>
    now have the following enforced signature:
    <methodsynopsis>
     <type class="union"><type>resource</type><type>false</type></type><methodname>dba_open</methodname>
     <methodparam><type>string</type><parameter>path</parameter></methodparam>
     <methodparam><type>string</type><parameter>mode</parameter></methodparam>
     <methodparam choice="opt"><type class="union"><type>string</type><type>null</type></type><parameter>handler</parameter><initializer>&null;</initializer></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>permission</parameter><initializer>0644</initializer></methodparam>
     <methodparam choice="opt"><type>int</type><parameter>map_size</parameter><initializer>0</initializer></methodparam>
    </methodsynopsis>
   </para>
   <para>
    <function>dba_fetch</function>'s optional skip argument is now at the end
    in line with PHP userland semantics. Its signature is now:
    <methodsynopsis>
     <type class="union"><type>string</type><type>false</type></type><methodname>dba_fetch</methodname>
     <methodparam><type class="union"><type>string</type><type>array</type></type><parameter>key</parameter></methodparam>
     <methodparam><type>resource</type><parameter>handle</parameter></methodparam>
     <methodparam><type>int</type><parameter>skip</parameter></methodparam>
    </methodsynopsis>

    The overloaded signature:
    <methodsynopsis>
     <type class="union"><type>string</type><type>false</type></type><methodname>dba_fetch</methodname>
     <methodparam><type class="union"><type>string</type><type>array</type></type><parameter>key</parameter></methodparam>
     <methodparam><type>int</type><parameter>skip</parameter></methodparam>
     <methodparam><type>resource</type><parameter>handle</parameter></methodparam>
    </methodsynopsis>
    is still accepted, but it is recommended to use the new standard variant.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.functions.random">
   <title>Random</title>

   <para>
    <function>random_bytes</function> and <function>random_int</function>
    now throw a <classname>\Random\RandomException</classname> on CSPRNG failures.
    Previously a plain <classname>Exception</classname> was thrown instead.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.functions.spl">
   <title>SPL</title>

   <para>
    The <parameter>iterator</parameter> parameter of
    <function>iterator_to_array</function> and <function>iterator_count</function>
    is widened to <type>iterable</type> from <classname>Iterator</classname>,
    allowing arrays to be passed.
    <!-- RFC: https://wiki.php.net/rfc/iterator_xyz_accept_array -->
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="migration82.other-changes.extensions">
  <title>Other Changes to Extensions</title>

  <sect3 xml:id="migration82.other-changes.extensions.date">
   <title>Date</title>

   <para>
    The properties of <classname>DatePeriod</classname> are now properly declared.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.intl">
   <title>Intl</title>

   <para>
    Instances of
    <classname>IntlBreakIterator</classname>,
    <classname>IntlRuleBasedBreakIterator</classname>,
    <classname>IntlCodePointBreakIterator</classname>,
    <classname>IntlPartsIterator</classname>,
    <classname>IntlCalendar</classname>,
    <classname>IntlCalendar</classname>,
    <classname>Collator</classname>,
    <classname>IntlIterator</classname>,
    <classname>UConverter</classname>,
    <classname>IntlDateFormatter</classname>,
    <classname>IntlDatePatternGenerator</classname>,
    <classname>MessageFormatter</classname>,
    <classname>ResourceBundle</classname>,
    <classname>Spoofchecker</classname>,
    <classname>IntlTimeZone</classname>,
    and <classname>Transliterator</classname>
    are no longer serializable. Previously, they could be serialized, but
    unserialization yielded unusable objects or failed.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.mysqli">
   <title>MySQLi</title>

   <para>
    The support for libmysql has been removed. It's no longer possible to compile
    mysqli with libmysql and all relevant functionality has been removed.
   </para>

   <itemizedlist>
    <listitem>
     <simpara>
      The reconnect property of <classname>mysqli_driver</classname> has been removed.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      <!-- TODO Link -->
      The INI directive mysqli.reconnect has been removed.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      The constant <constant>MYSQLI_IS_MARIADB</constant> has been deprecated.
     </simpara>
    </listitem>
   </itemizedlist>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.oci8">
   <title>OCI8</title>

   <para>
    The minimum Oracle Client library version required is now 11.2.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.pcre">
   <title>PCRE</title>

   <para>
    NUL characters (<literal>\0</literal>) in pattern strings are now supported.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.session">
   <title>Session</title>

   <para>
    <!-- Todo Link INI setting -->
    Trying to change the SameSite cookie INI setting while the session is
    active or output has already been sent will now fail and emit a warning.
    This aligns the behaviour with all other session INI settings.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.sqlite3">
   <title>SQLite3</title>

   <para>
    <!-- Todo Link INI Setting -->
    sqlite3.defensive is now <constant>PHP_INI_USER</constant>.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.standard">
   <title>Standard</title>

   <para>
    <function>getimagesize</function> now reports the actual image dimensions,
    bits and channels of AVIF images. Previously, the dimensions have been reported as 0x0,
    and bits and channels have not been reported at all.
   </para>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.tidy">
   <title>Tidy</title>

   <itemizedlist>
    <listitem>
     <simpara>
      Properties of <classname>tidy</classname> are now properly declared.
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      Properties of <classname>tidyNode</classname> are now properly declared as readonly.
     </simpara>
    </listitem>
   </itemizedlist>
  </sect3>

  <sect3 xml:id="migration82.other-changes.extensions.zip">
   <title>Zip</title>

   <para>
    The Zip extension has been updated to version 1.20.0,
    which adds the following methods:
    <itemizedlist>
     <listitem>
      <simpara>
       <methodname>ZipArchive::clearError</methodname>
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <methodname>ZipArchive::getStreamName</methodname>
      </simpara>
     </listitem>
     <listitem>
      <simpara>
       <methodname>ZipArchive::getStreamIndex</methodname>
      </simpara>
     </listitem>
    </itemizedlist>
   </para>
  </sect3>
 </sect2>

 <sect2 xml:id="migration82.other-changes.ini">
  <title>Changes to INI File Handling</title>

  <para>
   Parsing of some ill-formatted values will now trigger a warning when this
   was silently ignored before.
   For backwards compatibility, interpretation of these values has not changed.
   This affects the following settings:

   <!-- Todo Link INI Settings -->
   <itemizedlist>
    <listitem>
     <simpara>bcmath.scale</simpara>
    </listitem>
    <listitem>
     <simpara>com.code_page</simpara>
    </listitem>
    <listitem>
     <simpara>default_socket_timeout</simpara>
    </listitem>
    <listitem>
     <simpara>fiber.stack_size</simpara>
    </listitem>
    <listitem>
     <simpara>hard_timeout</simpara>
    </listitem>
    <listitem>
     <simpara>intl.error_level</simpara>
    </listitem>
    <listitem>
     <simpara>ldap.max_links</simpara>
    </listitem>
    <listitem>
     <simpara>max_input_nesting_level</simpara>
    </listitem>
    <listitem>
     <simpara>max_input_vars</simpara>
    </listitem>
    <listitem>
     <simpara>mbstring.regex_retry_limit</simpara>
    </listitem>
    <listitem>
     <simpara>mbstring.regex_stack_limit</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.allow_local_infile</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.allow_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.default_port</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.max_links</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.max_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.reconnect</simpara>
    </listitem>
    <listitem>
     <simpara>mysqli.rollback_on_cached_plink</simpara>
    </listitem>
    <listitem>
     <simpara>mysqlnd.log_mask</simpara>
    </listitem>
    <listitem>
     <simpara>mysqlnd.mempool_default_size</simpara>
    </listitem>
    <listitem>
     <simpara>mysqlnd.net_read_buffer_size</simpara>
    </listitem>
    <listitem>
     <simpara>mysqlnd.net_read_timeout</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.default_prefetch</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.max_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.persistent_timeout</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.ping_interval</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.prefetch_lob_size</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.privileged_connect</simpara>
    </listitem>
    <listitem>
     <simpara>oci8.statement_cache_size</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.allow_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.check_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.defaultbinmode</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.default_cursortype</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.defaultlrl</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.max_links</simpara>
    </listitem>
    <listitem>
     <simpara>odbc.max_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.consistency_checks</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.file_update_protection</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.force_restart_timeout</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.interned_strings_buffer</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_bisect_limit</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_blacklist_root_trace</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_blacklist_side_trace</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_debug</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_hot_func</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_hot_loop</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_hot_return</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_hot_side_exit</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_exit_counters</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_loop_unrolls</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_polymorphic_calls</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_recursive_calls</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_recursive_returns</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_root_traces</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.jit_max_side_traces</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.log_verbosity_level</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.max_file_size</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.opt_debug_level</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.optimization_level</simpara>
    </listitem>
    <listitem>
     <simpara>opcache.revalidate_freq</simpara>
    </listitem>
    <listitem>
     <simpara>output_buffering</simpara>
    </listitem>
    <listitem>
     <simpara>pcre.backtrack_limit</simpara>
    </listitem>
    <listitem>
     <simpara>pcre.recursion_limit</simpara>
    </listitem>
    <listitem>
     <simpara>pgsql.max_links</simpara>
    </listitem>
    <listitem>
     <simpara>pgsql.max_persistent</simpara>
    </listitem>
    <listitem>
     <simpara>post_max_size</simpara>
    </listitem>
    <listitem>
     <simpara>realpath_cache_size</simpara>
    </listitem>
    <listitem>
     <simpara>realpath_cache_ttl</simpara>
    </listitem>
    <listitem>
     <simpara>session.cache_expire</simpara>
    </listitem>
    <listitem>
     <simpara>session.cookie_lifetime</simpara>
    </listitem>
    <listitem>
     <simpara>session.gc_divisor</simpara>
    </listitem>
    <listitem>
     <simpara>session.gc_maxlifetime</simpara>
    </listitem>
    <listitem>
     <simpara>session.gc_probability</simpara>
    </listitem>
    <listitem>
     <simpara>soap.wsdl_cache_limit</simpara>
    </listitem>
    <listitem>
     <simpara>soap.wsdl_cache_ttl</simpara>
    </listitem>
    <listitem>
     <simpara>unserialize_max_depth</simpara>
    </listitem>
    <listitem>
     <simpara>upload_max_filesize</simpara>
    </listitem>
    <listitem>
     <simpara>user_ini.cache_ttl</simpara>
    </listitem>
    <listitem>
     <simpara>xmlrpc_error_number</simpara>
    </listitem>
    <listitem>
     <simpara>zend.assertions</simpara>
    </listitem>
    <listitem>
     <simpara>zlib.output_compression_level</simpara>
    </listitem>
   </itemizedlist>
  </para>
 </sect2>

</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
