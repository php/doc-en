<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<sect1 xml:id="install.unix.source" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>Installing from source on Unix and macOS systems</title>
  <para>
   Prerequisite knowledge and software for compiling:
   <simplelist>
    <member>
     Basic Unix skills (being able to operate <command>make</command> and a C
     compiler)
    </member>
    <member>
     A C compiler (as of PHP 8.0.0, C99 compatibility is assumed)
    </member>
    <member>
     A web server
    </member>
    <member>
     Any module specific components (such as <acronym>GD</acronym>,
     <acronym>PDF</acronym> libs, etc.)
    </member>
   </simplelist>
  </para>

  <para>
   When building directly from Git sources or after custom modifications,
   these additional tools may be necessary:
   <itemizedlist>
    <listitem>
     <simpara>
      autoconf:
     </simpara>
     <simplelist>
      <member>
       PHP 7.3 and later: 2.68+
      </member>
      <member>
       PHP 7.2: 2.64+
      </member>
      <member>
       PHP 7.1 and earlier: 2.59+
      </member>
     </simplelist>
    </listitem>
    <listitem>
     <simpara>
      re2c:
     </simpara>
     <simplelist>
      <member>
       PHP 8.3 and later: 1.0.3+
      </member>
      <member>
       PHP 8.2 and earlier: 0.13.4+
      </member>
     </simplelist>
    </listitem>
    <listitem>
     <simpara>
      bison:
     </simpara>
     <simplelist>
      <member>
       PHP 7.4 and later: 3.0.0+
      </member>
      <member>
       PHP 7.3 and earlier: 2.4+ (including Bison 3.x)
      </member>
     </simplelist>
    </listitem>
   </itemizedlist>
  </para>

  <para>
   The initial PHP setup and configuration process is controlled by the
   use of the command line options of the <command>configure</command>
   script. A list of available options along with short explanations can
   be shown by running <command>./configure --help</command>.
   Our manual documents the different options separately. You will
   find the <link linkend="configure.about">core options in the appendix</link>,
   while the different extension specific options are described on the
   reference pages.
  </para>

  <para>
   When PHP is configured, you are ready to build the module and/or
   executables. The command <command>make</command> should
   take care of this. If it fails and you can't figure out why, see
   the <link linkend="install.problems">Problems section</link>.
  </para>

  <note>
   <para>
    Some Unix systems (such as OpenBSD and SELinux) may disallow mapping pages
    both writable and executable for security reasons, what is called
    <link xlink:href="https://en.wikibooks.org/wiki/Grsecurity/Appendix/Grsecurity_and_PaX_Configuration_Options#Restrict_mprotect()">PaX
    MPROTECT</link> or <link xlink:href="https://en.wikipedia.org/wiki/W%5EX">W^X
    violation protection</link>. This kind of memory mapping is necessary for
    PCRE's JIT support, so either PHP has to be built
    <link linkend="pcre.installation">without PCRE's JIT support</link>, or the
    binary has to be whitelisted by any means provided by the system.
   </para>
  </note>

  <note>
   <simpara>
    Cross-compiling for ARM with the Android toolchain is currently not supported.
   </simpara>
  </note>
</sect1>
