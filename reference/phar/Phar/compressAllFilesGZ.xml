<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision$ -->
<refentry xmlns="http://docbook.org/ns/docbook" xml:id="phar.compressallfilesgz">
 <refnamediv>
  <refname>Phar::compressAllFilesGZ</refname>
  <refpurpose>Compresses all files in the current Phar archive using Gzip compression</refpurpose>
 </refnamediv>

 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type>bool</type><methodname>Phar::compressAllFilesGZ</methodname>
   <void/>
  </methodsynopsis>
  &phar.removed.pharcompress;
  &phar.write;

  <para>
   For tar-based phar archives, this method compresses the entire archive using
   gzip compression.  The resulting file can be processed with the gunzip command, or
   accessed directly and transparently with the Phar extension.
  </para>
  <para>
   For Zip-based and phar-based phar archives, this method compresses all files in the
   Phar archive using gzip compression.
   The <link linkend="ref.zlib">zlib</link> extension must be enabled to take
   advantage of this feature.  In addition, if any files are already compressed using
   bzip2 compression, the <link linkend="ref.bzip2">bzip2</link> extension must be
   enabled in order to decompress the files prior to re-compressing with gzip compression.
   As with all functionality that modifies the contents of a phar, the
   <link linkend="ini.phar.readonly">phar.readonly</link> INI variable must be off
   in order to succeed.
  </para>
 </refsect1>

 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   &return.success;
  </para>
 </refsect1>

 <refsect1 role="errors">
  &reftitle.errors;
  <para>
   Throws <classname>BadMethodCallException</classname> if
   the <link linkend="ini.phar.readonly">phar.readonly</link>
   INI variable is on, the <link linkend="ref.zlib">zlib</link>
   extension is not available, or if any files are compressed using
   bzip2 compression and the <link linkend="ref.bzip2">bzip2</link> extension
   is not enabled.
  </para>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title>A <function>Phar::compressAllFilesGZ</function> example</title>
    <programlisting role="php">
<![CDATA[
<?php
$p = new Phar('/path/to/my.phar', 0, 'my.phar');
$p['myfile.txt'] = 'hi';
$p['myfile2.txt'] = 'hi';
foreach ($p as $file) {
    var_dump($file->getFileName());
    var_dump($file->isCompressed());
    var_dump($file->isCompressedBZIP2());
    var_dump($file->isCompressedGZ());
}
$p->compressAllFilesGZ();
foreach ($p as $file) {
    var_dump($file->getFileName());
    var_dump($file->isCompressed());
    var_dump($file->isCompressedBZIP2());
    var_dump($file->isCompressedGZ());
}
?>
]]>
    </programlisting>
    &example.outputs;
    <screen>
<![CDATA[
string(10) "myfile.txt"
bool(false)
bool(false)
bool(false)
string(11) "myfile2.txt"
bool(false)
bool(false)
bool(false)
string(10) "myfile.txt"
bool(true)
bool(false)
bool(true)
string(11) "myfile2.txt"
bool(true)
bool(false)
bool(true)
]]>
    </screen>
   </example>
  </para>
 </refsect1>

 <refsect1 role="seealso">
  &reftitle.seealso;
  <para>
   <simplelist>
    <member><function>PharFileInfo::getCompressedSize</function></member>
    <member><function>PharFileInfo::isCompressedBZIP2</function></member>
    <member><function>PharFileInfo::isCompressed</function></member>
    <member><function>PharFileInfo::isCompressedGZ</function></member>
    <member><function>PharFileInfo::setCompressedBZIP2</function></member>
    <member><function>PharFileInfo::setUncompressed</function></member>
    <member><function>PharFileInfo::setCompressedGZ</function></member>
    <member><function>Phar::canCompress</function></member>
    <member><function>Phar::isCompressed</function></member>
    <member><function>Phar::compressAllFilesBZIP2</function></member>
    <member><function>Phar::getSupportedCompression</function></member>
    <member><function>Phar::uncompressAllFiles</function></member>
   </simplelist>
  </para>
 </refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
