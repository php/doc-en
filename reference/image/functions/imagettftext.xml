<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<refentry xml:id="function.imagettftext" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>imagettftext</refname>
  <refpurpose>Write text to the image using TrueType fonts</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <type class="union"><type>array</type><type>false</type></type><methodname>imagettftext</methodname>
   <methodparam><type>GdImage</type><parameter>image</parameter></methodparam>
   <methodparam><type>float</type><parameter>size</parameter></methodparam>
   <methodparam><type>float</type><parameter>angle</parameter></methodparam>
   <methodparam><type>int</type><parameter>x</parameter></methodparam>
   <methodparam><type>int</type><parameter>y</parameter></methodparam>
   <methodparam><type>int</type><parameter>color</parameter></methodparam>
   <methodparam><type>string</type><parameter>font_filename</parameter></methodparam>
   <methodparam><type>string</type><parameter>text</parameter></methodparam>
   <methodparam choice="opt"><type>array</type><parameter>options</parameter><initializer>[]</initializer></methodparam>
  </methodsynopsis>
  <para>
   Writes the given <parameter>text</parameter> into the image using TrueType
   fonts.
  </para>
  <note>
   <para>
    Prior to PHP 8.0.0, <function>imagefttext</function> was an extended variant of
    <function>imagettftext</function> which additionally supported the
    <parameter>extrainfo</parameter>.
    As of PHP 8.0.0, <function>imagettftext</function> is an alias of <function>imagefttext</function>.
   </para>
  </note>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;
  <para>
   <variablelist>
    &gd.image.description;
    <varlistentry>
     <term><parameter>size</parameter></term>
     <listitem>
      <para>&gd.font.size;</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>angle</parameter></term>
     <listitem>
      <para>
       The angle in degrees, with 0 degrees being left-to-right reading text.
       Higher values represent a counter-clockwise rotation. For example, a
       value of 90 would result in bottom-to-top reading text.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>x</parameter></term>
     <listitem>
      <para>
       The coordinates given by <parameter>x</parameter> and
       <parameter>y</parameter> will define the basepoint of the first
       character (roughly the lower-left corner of the character). This
       is different from the <function>imagestring</function>, where
       <parameter>x</parameter> and <parameter>y</parameter> define the
       upper-left corner of the first character. For example, "top left"
       is 0, 0.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>y</parameter></term>
     <listitem>
      <para>
       The y-ordinate. This sets the position of the fonts baseline, not the
       very bottom of the character.
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><parameter>color</parameter></term>
     <listitem>
      <para>
       The color index. Using the negative of a color index has the effect of
       turning off antialiasing. See <function>imagecolorallocate</function>.
      </para>
     </listitem>
    </varlistentry>
    &gd.ttf.fontfile;
    <varlistentry>
     <term><parameter>text</parameter></term>
     <listitem>
      <para>
       The text string in UTF-8 encoding.
      </para>
      <para>
       May include decimal numeric character references (of the form:
       <literal>&amp;#8364;</literal>) to access characters in a font beyond position 127.
       The hexadecimal format (like <literal>&amp;#xA9;</literal>) is supported.
       Strings in UTF-8 encoding can be passed directly.
      </para>
      <para>
       Named entities, such as <literal>&amp;copy;</literal>, are not supported. Consider using
       <function>html_entity_decode</function>
       to decode these named entities into UTF-8 strings.
      </para>
      <para>
       If a character is used in the string which is not supported by the
       font, a hollow rectangle will replace the character.
      </para>
     </listitem>
    </varlistentry>
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   Returns an array with 8 elements representing four points making the
   bounding box of the text. The order of the points is lower left, lower
   right, upper right, upper left. The points are relative to the text
   regardless of the angle, so "upper left" means in the top left-hand
   corner when you see the text horizontally.
   Returns &false; on error.
  </para>
 </refsect1>

 <refsect1 role="changelog">
  &reftitle.changelog;
  <informaltable>
   <tgroup cols="2">
    <thead>
     <row>
      <entry>&Version;</entry>
      <entry>&Description;</entry>
     </row>
    </thead>
    <tbody>
     <row>
      <entry>8.0.0</entry>
      <entry>
       The <parameter>options</parameter> has been added.
      </entry>
     </row>
    </tbody>
   </tgroup>
  </informaltable>
 </refsect1>

 <refsect1 role="examples">
  &reftitle.examples;
  <para>
   <example>
    <title><function>imagettftext</function> example</title>
    <para>
     This example script will produce a white PNG 400x30 pixels, with
     the words "Testing..." in black (with grey shadow), in the font Arial.
    </para>
    <programlisting role="php">
<![CDATA[
<?php

// Set the content-type
header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing...';

// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);

?>
]]>
    </programlisting>
    &example.outputs.similar;
    <mediaobject>
     <alt>Output of example : imagettftext()</alt>
     <imageobject>
      <imagedata fileref="en/reference/image/figures/imagettftext.png"/>
     </imageobject>
    </mediaobject>
   </example>
  </para>
 </refsect1>
 <refsect1 role="notes">
  &reftitle.notes;
  &note.freetype;
 </refsect1>
 <refsect1 role="seealso">
  &reftitle.seealso;
  <simplelist>
   <member><function>imagettfbbox</function></member>
   <member><function>imagefttext</function></member>
  </simplelist>
 </refsect1>
</refentry>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
